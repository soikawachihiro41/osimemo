{
  "version": 3,
  "sources": ["../../javascript/new.js"],
  "sourcesContent": ["document.addEventListener('DOMContentLoaded', () => {\n  const token = document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content');\n  const LIFF_ID = gon.user_key;\n  liff\n    .init({\n      liffId: LIFF_ID,\n      withLoginOnExternalBrowser: true\n    })\n  liff\n    .ready.then(() => {\n      if (!liff.isLoggedIn()) {\n        liff.login();\n      } else {\n        liff.getProfile().then(profile => {\n          const idToken = liff.getIDToken()\n          const name = profile.displayName\n          const body = `idToken=${idToken}&name=${name}`\n          const request = new Request('/users', {\n            headers: {\n              'Content-Type': 'application/x-www-form-urlencoded; charset=utf-8',\n              'X-CSRF-Token': token\n            },\n            method: 'POST',\n            body: body\n          });\n\n          fetch(request)\n            .then(response => response.json())\n            .then(data => {\n              data_id = data\n            })\n            .then(() => {\n              window.location = '/after_login'\n            })\n            .catch(error => {\n              console.error('\u30A8\u30E9\u30FC:', error);\n            });\n        })\n      }\n    })\n})\n"],
  "mappings": ";;AAAA,WAAS,iBAAiB,oBAAoB,MAAM;AAClD,UAAM,QAAQ,SAAS,cAAc,yBAAyB,EAAE,aAAa,SAAS;AACtF,UAAM,UAAU,IAAI;AACpB,SACG,KAAK;AAAA,MACJ,QAAQ;AAAA,MACR,4BAA4B;AAAA,IAC9B,CAAC;AACH,SACG,MAAM,KAAK,MAAM;AAChB,UAAI,CAAC,KAAK,WAAW,GAAG;AACtB,aAAK,MAAM;AAAA,MACb,OAAO;AACL,aAAK,WAAW,EAAE,KAAK,aAAW;AAChC,gBAAM,UAAU,KAAK,WAAW;AAChC,gBAAM,OAAO,QAAQ;AACrB,gBAAM,OAAO,WAAW,OAAO,SAAS,IAAI;AAC5C,gBAAM,UAAU,IAAI,QAAQ,UAAU;AAAA,YACpC,SAAS;AAAA,cACP,gBAAgB;AAAA,cAChB,gBAAgB;AAAA,YAClB;AAAA,YACA,QAAQ;AAAA,YACR;AAAA,UACF,CAAC;AAED,gBAAM,OAAO,EACV,KAAK,cAAY,SAAS,KAAK,CAAC,EAChC,KAAK,UAAQ;AACZ,sBAAU;AAAA,UACZ,CAAC,EACA,KAAK,MAAM;AACV,mBAAO,WAAW;AAAA,UACpB,CAAC,EACA,MAAM,WAAS;AACd,oBAAQ,MAAM,uBAAQ,KAAK;AAAA,UAC7B,CAAC;AAAA,QACL,CAAC;AAAA,MACH;AAAA,IACF,CAAC;AAAA,EACL,CAAC;",
  "names": []
}
